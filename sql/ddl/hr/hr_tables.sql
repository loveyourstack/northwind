
CREATE TABLE hr.employee
(	
  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  address text NOT NULL,
  city text NOT NULL,
  country_fk bigint NOT NULL REFERENCES core.country(id),
  created_at tracking_at,
  created_by tracking_by,
  date_of_birth date NOT NULL CHECK (date_of_birth >= '1920-01-01'),
  first_name text NOT NULL,
  hire_date date NOT NULL CHECK (hire_date >= '2010-01-01'),
  home_phone text NOT NULL,
  job_title text NOT NULL,
  last_name text NOT NULL,
  last_user_update_by tracking_by,
  name text NOT NULL UNIQUE, -- not generated, in order to allow user to specify uniqueness however he chooses, e.g. using department or some other criterion
  notes text NOT NULL,
  postal_code text NOT NULL,
  reports_to_fk bigint REFERENCES hr.employee(id), -- self-reference - is made mandatory after data is inserted
  state text NOT NULL,
  title text NOT NULL,
  updated_at tracking_at
);
COMMENT ON TABLE hr.employee IS 'shortname: emp';


CREATE TABLE hr.meeting_schedule
(	
  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at tracking_at,
  day core.weekday NOT NULL,
  frequency core.frequency NOT NULL,
  name text NOT NULL UNIQUE,
  scheduled_time time NOT NULL,
  updated_at tracking_at
);
COMMENT ON TABLE hr.meeting_schedule IS 'shortname: ms';
